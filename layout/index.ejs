<div class="wrapper">
    <% let archiveTitle 
        if (page.tag) {
            archiveTitle = "标签 " + page.tag + " 下的文章";
        } else if (page.category) {
            archiveTitle = "分类 " + page.category + " 下的文章";
        }
    %>
    <h3 class="archive-title" <%- archiveTitle ? '' : 'style="display: none;"' %>><%- archiveTitle %></h3>
    <% if (page.posts && page.posts.length > 0) { %>
    <% page.posts.each(function(post){ %>
        <% hasImg = post.img ? true : false; %>
        <article class="post <% if (hasImg) { %>post--photo post--cover<% } else { %>post--text<% } %> post--index main-item">
            <div class="post-inner" data-aos="fade-up" data-aos-anchor-placement="top-bottom">
                <header class="post-item post-header  <% if (hasImg) { %>no-bg<% } %>">
                    <div class="wrapper post-wrapper">
                        <div class="avatar post-author">
                            <%
                            if (theme.authorAvatarPath) {
                                postavatar = theme.authorAvatarPath;
                            } else {
                                postavatar = url_for('images/avatar.png');
                            }
                            %>
                            <img src="<%= postavatar; %>" alt="作者头像" class="avatar-item avatar-img">
                            <span class="avatar-item">
                                <%= config.author; %>
                            </span>
                        </div>
                    </div>
                </header>

                <!-- 大图样式 -->
                <% if (hasImg) { %>
                 
                    <figure class="post-media single">
                        <img data-aos="zoom-out" data-aos-anchor-placement="top-bottom" itemprop="image" src="<%= post.img; %>" alt="头图" width="2000" height="800">
                    </figure>
                <% } %>

                <!-- 文章作者 -->
                <section class="post-item post-body">
                    <div class="wrapper post-wrapper">
                        <h1 class="post-title">
                            <a href="<%= url_for(post.path) %>" title="<%= post.title; %>">
                                <%= post.title; %>
                            </a>
                        </h1>

                        <!-- 摘要 -->
                        <p class="post-excerpt">
                            <% if (post.description) { %>
                            <%- strip_html(String(post.description)) %>
                            <% } else if (post.excerpt){ %>
                                <%- strip_html(String(post.excerpt)) %>
                            <% } else { %>
                                <%- truncate(strip_html(post.content).trim().replace(/\n/g, ' '), {length: 200}) %>
                            <% } %>
                        </p>
                    </div>
                </section>

                <footer class="post-item post-footer">
                    <div class="wrapper post-wrapper">
                        <div class="meta post-meta">
                            <a itemprop="datePublished" href="<%= url_for(post.path) %>" class="icon-ui icon-ui-date meta-item meta-date">
                                <span class="meta-count">
                                    <%- post.date.format('YYYY-MM-DD') %>
                                </span>
                            </a>
                            <!-- <a href="<?php $this->permalink() ?>#comments" class="icon-ui icon-ui-comment meta-item meta-comment">
                                <?php $this->commentsNum('暂无评论', '1 条评论', '%d 条评论'); ?>
                            </a> -->
                            <a href="<%= url_for(post.path) %>" class="icon-ui icon-article meta-item meta-more">
                            阅读全文
                            </a>
                        </div>
                    </div>
                </footer>
            </div>
        </article>
    <% }); %>
    <% } %>

</div>

<nav class="nav main-pager" data-js="pager">
    <span class="nav-item-alt">
        第 <%= page.current || 1 %> 页 / 共 <%= page.total || 1 %> 页
    </span>
    <div class="nav nav--pager">
        <% if (page.prev) { %>
            <a href="<%= url_for(page.prev_link) %>">上一页</a>
        <% } %>
        <i class="icon-record-outline"></i>
        <% if (page.next) { %>
            <a href="<%= url_for(page.next_link) %>">下一页</a>
        <% } %>
    </div>
</nav>

<div class="nav main-lastinfo">
        <span class="nav-item-alt">
            <%= theme.footerInfo %>
        </span>
</div>
</main>